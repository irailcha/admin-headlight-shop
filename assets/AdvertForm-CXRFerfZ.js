import{f as p,h as t,i as h,k as x,l as j,u as f,j as e,F as g,n as N,o as i,E as a,p as u}from"./index-CJ3FvhiY.js";const v=p().shape({mark:t().required("Це поле обов'язкове"),model:t().required("Це поле обов'язкове"),state:t().required("Це поле обов'язкове"),typeOfLamps:t().required("Це поле обов'язкове"),side:t().required("Це поле обов'язкове"),isOriginal:h().required("Це поле обов'язкове"),partNumber:t().required("Це поле обов'язкове"),price:x().required("Це поле обов'язкове").min(0,"Ціна не може бути від'ємною"),photo:j().min(1,"Має бути хоча б одне фото").test("fileFormat","Файли мають бути у форматі JPEG, WEBP або PNG",n=>n.every(l=>["image/jpeg","image/png","image/webp"].includes(l.type))).test("fileSize","Розмір файлу не має перевищувати 5 МБ",n=>n.every(l=>l.size<=5*1024*1024)),videoUrl:t().url("Невірне посилання на відео"),description:t().required("Це поле обов'язкове")}),y=()=>{const n=f(),l=async r=>{const s=new FormData;s.append("mark",r.compatibility),s.append("model",r.compatibility),s.append("state",r.state),s.append("typeOfLamps",r.typeOfLamps),s.append("side",r.typeOfLamps),s.append("isOriginal",r.isOriginal),s.append("partNumber",r.partNumber),s.append("price",r.price),s.append("description",r.description),r.photo.forEach(o=>{s.append("photo",o)}),r.videoUrl&&s.append("videoUrl",r.videoUrl);try{await n(u(s)),alert("Оголошення додано!")}catch{alert("Сталася помилка при додаванні оголошення")}},d=r=>{if(!r.length)return"Має бути хоча б одне фото";for(let s of r){if(!["image/jpeg","image/png","image/webp"].includes(s.type))return"Файли мають бути у форматі JPEG, WEBP або PNG";if(s.size>5*1024*1024)return"Розмір файлу не має перевищувати 5 МБ"}};return e.jsx("section",{className:"form-container",children:e.jsx(g,{initialValues:{mark:"",model:"",state:"",typeOfLamps:"",side:"",isOriginal:!1,partNumber:"",price:0,photo:[],videoUrl:"",description:""},validationSchema:v,onSubmit:l,children:({setFieldValue:r,setErrors:s})=>e.jsxs(N,{children:[e.jsx("h2",{className:"form-title",children:"Створити оголошення"}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"mark",children:"Марка"}),e.jsx(i,{name:"mark",type:"text"}),e.jsx(a,{name:"mark",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"model",children:"Модель"}),e.jsx(i,{name:"model",type:"text"}),e.jsx(a,{name:"model",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"state",children:"Стан"}),e.jsx(i,{name:"state",type:"text"}),e.jsx(a,{name:"state",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"typeOfLamps",children:"Тип ламп"}),e.jsx(i,{name:"typeOfLamps",type:"text"}),e.jsx(a,{name:"typeOfLamps",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"side",children:"Сторона"}),e.jsxs(i,{as:"select",name:"side",children:[e.jsx("option",{value:"left",children:"Ліва"}),e.jsx("option",{value:"right",children:"Права"}),e.jsx("option",{value:"couple",children:"Комплект"})]}),e.jsx(a,{name:"side",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"isOriginal",children:"Оригінальність"}),e.jsx(i,{type:"checkbox",name:"isOriginal"}),e.jsx(a,{name:"isOriginal",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"partNumber",children:"Номер деталі"}),e.jsx(i,{name:"partNumber",type:"text"}),e.jsx(a,{name:"partNumber",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"price",children:"Ціна"}),e.jsx(i,{name:"price",type:"number"}),e.jsx(a,{name:"price",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"photo",children:"Фото"}),e.jsx("input",{name:"photo",type:"file",multiple:!0,onChange:o=>{const m=Array.from(o.currentTarget.files),c=d(m);c?(r("photo",[]),s({photo:c})):r("photo",m)}}),e.jsx(a,{name:"photo",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"videoUrl",children:"Посилання на відео"}),e.jsx(i,{name:"videoUrl",type:"url"}),e.jsx(a,{name:"videoUrl",component:"div",className:"error-message"})]}),e.jsxs("div",{className:"field-container",children:[e.jsx("label",{htmlFor:"description",children:"Опис"}),e.jsx(i,{name:"description",as:"textarea"}),e.jsx(a,{name:"description",component:"div",className:"error-message"})]}),e.jsx("button",{type:"submit",children:"Додати оголошення"})]})})})};export{y as default};
