import{u as h,a as t,r as l,g as j,j as s,m}from"./index-BzDvmxuU.js";import{L as p}from"./Loader-u-___b46.js";const u=r=>r.messages.messages,f=r=>r.messages.loading,v=r=>r.messages.error,E=()=>{const r=h(),c=t(u),o=t(f),d=t(v),[n,x]=l.useState(null);if(l.useEffect(()=>{r(j())},[r]),o)return s.jsx(p,{});const g=(e,a)=>{x(n===e?null:e),a||r(m(e))};return s.jsxs("div",{className:"messages-container",children:[s.jsx("h2",{children:"Список повідомлень"}),d&&s.jsx("p",{className:"error",children:d}),c.length>0?c.map(e=>{var a,i;return s.jsxs("div",{className:`message-item ${e.isRead?"":"unread"}`,children:[s.jsxs("div",{className:"message-header",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Оголошення:"})," ",((a=e.advert)==null?void 0:a.compatibility)||"Оголошення не знайдено"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"ID:"})," ",((i=e.advert)==null?void 0:i._id)||"ID не знайдено"]})]}),s.jsxs("div",{className:"message-meta",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Телефон:"})," ",e.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Дата:"})," ",new Date(e.createdAt).toLocaleString()]})]}),s.jsx("button",{className:"message-toggle",onClick:()=>g(e._id,e.isRead),children:n===e._id?"Закрити":"Відкрити"}),n===e._id&&s.jsx("div",{className:"message-content",children:s.jsxs("p",{children:[s.jsx("strong",{children:"Повідомлення:"})," ",e.message]})})]},e._id)}):s.jsx("p",{children:"Немає повідомлень"})]})};export{E as default};
